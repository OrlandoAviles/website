<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Slots</title>

<style>
*,
*::before,
*::after { box-sizing: border-box; }

:root{
  --bg: hsl(0 0% 6%);

  /* LED ring tuning */
  --ringBlur: 28px;
  --ringSpread: 26px;
  --ringAlpha: 0.95;

  /* Hue drivers (animated in JS) */
  --h1: 30;
  --h2: 120;
  --h3: 210;
  --h4: 300;

  /* LED blob positions around border (animated in JS) */
  --p1x: 15%;  --p1y: 10%;
  --p2x: 85%;  --p2y: 15%;
  --p3x: 90%;  --p3y: 85%;
  --p4x: 10%;  --p4y: 90%;
  --p5x: 50%;  --p5y: 0%;
  --p6x: 100%; --p6y: 50%;
  --p7x: 50%;  --p7y: 100%;
  --p8x: 0%;   --p8y: 50%;

  /* Multi-gradient LED ring */
  --ledRing:
    radial-gradient(circle at var(--p1x) var(--p1y),
      hsl(var(--h1) 95% 70% / var(--ringAlpha)),
      transparent 60%),
    radial-gradient(circle at var(--p2x) var(--p2y),
      hsl(var(--h2) 95% 70% / var(--ringAlpha)),
      transparent 60%),
    radial-gradient(circle at var(--p3x) var(--p3y),
      hsl(var(--h3) 95% 70% / var(--ringAlpha)),
      transparent 60%),
    radial-gradient(circle at var(--p4x) var(--p4y),
      hsl(var(--h4) 95% 70% / var(--ringAlpha)),
      transparent 60%),

    radial-gradient(circle at var(--p5x) var(--p5y),
      hsl(calc(var(--h1) + 40) 95% 72% / 0.75),
      transparent 65%),
    radial-gradient(circle at var(--p6x) var(--p6y),
      hsl(calc(var(--h2) + 40) 95% 72% / 0.75),
      transparent 65%),
    radial-gradient(circle at var(--p7x) var(--p7y),
      hsl(calc(var(--h3) + 40) 95% 72% / 0.75),
      transparent 65%),
    radial-gradient(circle at var(--p8x) var(--p8y),
      hsl(calc(var(--h4) + 40) 95% 72% / 0.75),
      transparent 65%);

  /* Background haze */
  --haze:
    radial-gradient(circle at 30% 20%,
      hsl(var(--h2) 90% 60% / 0.08),
      transparent 60%),
    radial-gradient(circle at 70% 80%,
      hsl(var(--h4) 90% 60% / 0.08),
      transparent 60%);

  /* Animated LED "bulb brightness" */
  --spark: 0.5;
}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family: system-ui, sans-serif;
  background:
    radial-gradient(circle at center, #1515d5, #000),
    var(--haze);
  color: gold;
}

/* MACHINE */
.machine{
  position:relative;
  padding: 20px 24px 28px;
  border-radius: 18px;
  border: 4px solid rgba(255,215,0,0.9);
  background: var(--bg);
  box-shadow: 0 0 40px rgba(255,215,0,.12);
  overflow: visible;
}

/* LED glow ring behind machine */
.machine::before{
  content:"";
  position:absolute;
  inset: calc(-1 * var(--ringSpread));
  border-radius: 34px;
  background: var(--ledRing);
  filter: blur(var(--ringBlur));
  opacity: 1;
  z-index: -3;
  pointer-events:none;
  mix-blend-mode: screen;
}

/* LED bulb strip texture (the visible dots) */
.machine .led-strip{
  position:absolute;
  inset: -18px;
  border-radius: 30px;
  pointer-events:none;
  z-index: -2;

  /* the "LED dots" */
  background:
    radial-gradient(circle,
      rgba(255,255,255, calc(0.18 + (var(--spark) * 0.35))) 0 22%,
      transparent 24% 100%) 0 0 / 14px 14px;

  /* give it that hidden-behind-glass look */
  filter:
    blur(0.15px)
    drop-shadow(0 0 10px rgba(255,255,255,0.10))
    drop-shadow(0 0 18px rgba(255,255,255,0.08));
  opacity: 0.85;

  /* clip to a ring (only show on border, not inside) */
  -webkit-mask:
    radial-gradient(closest-side,
      transparent calc(100% - 18px),
      #000 calc(100% - 18px));
  mask:
    radial-gradient(closest-side,
      transparent calc(100% - 18px),
      #000 calc(100% - 18px));
}

/* LED colored overlay on dots (so dots inherit glow colors) */
.machine .led-strip::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: 30px;
  background: var(--ledRing);
  opacity: 0.85;
  mix-blend-mode: screen;
  filter: blur(8px);
}

/* subtle cabinet glass overlay */
.machine::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius: 18px;
  background:
    linear-gradient(to bottom,
      rgba(255,255,255,0.10),
      rgba(0,0,0,0.55));
  opacity: 0.35;
  pointer-events:none;
}

/* REELS WRAP */
.reels{
  display:flex;
  gap:16px;
  position:relative;
  margin-bottom: 18px;
  padding: 6px 4px;
}

/* PAYLINE (behind icons) */
.payline{
  position:absolute;
  top:50%;
  left: -8px;
  right: -8px;
  height: 3px;
  border-radius: 999px;
  background:
    linear-gradient(to right,
      transparent,
      rgba(255,215,0,0.8),
      transparent
    );
  box-shadow: 0 0 18px rgba(255,215,0,0.5);
  opacity: 0.65;
  z-index: 1;
  pointer-events:none;
}

/* REEL */
.reel{
  width: 90px;
  height: 110px;
  border-radius: 12px;
  background:
    linear-gradient(to bottom, rgba(255,255,255,.12), rgba(0,0,0,.35)),
    #000;
  border: 2px solid rgba(255,215,0,0.95);

  display:flex;
  justify-content:center;
  align-items:center;

  font-size: 44px;
  box-shadow:
    inset 0 6px 12px rgba(255,255,255,.14),
    inset 0 -10px 16px rgba(0,0,0,.75),
    0 8px 12px rgba(0,0,0,.7);

  transition: filter 0.2s ease;
  position: relative;
  z-index: 2; /* above payline */
}

.reel span{
  position: relative;
  z-index: 3;
  filter: drop-shadow(0 0 6px rgba(255,215,0,0.18));
}

.reel.spinning{
  filter: blur(1.35px) brightness(1.1);
}

/* BUTTON */
button{
  margin-top: 10px;
  width: 100%;
  padding: 14px;
  font-size: 18px;
  font-weight: 900;
  letter-spacing: 0.06ch;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  color: #111;

  background: linear-gradient(to bottom, #ffe38d, #c7a000);
  box-shadow:
    0 6px 0 #8f7300,
    0 12px 18px rgba(0,0,0,.65);
  transition: transform .08s, box-shadow .08s, filter .2s;
}

button:hover{ filter: brightness(1.06); }

button:active{
  transform: translateY(4px);
  box-shadow:
    0 2px 0 #8f7300,
    0 8px 12px rgba(0,0,0,.6);
}

button:disabled{
  opacity: .6;
  cursor: default;
}

/* MESSAGE */
#result{
  margin-top: 14px;
  text-align: center;
  font-size: 20px;
  min-height: 1.5em;
}

.win{
  animation: pulse .6s infinite alternate;
}

@keyframes pulse{
  from { text-shadow: 0 0 6px gold; }
  to   { text-shadow: 0 0 18px gold; }
}

/* jackpot shake */
.shake{
  animation: shake 0.22s linear 2;
}
@keyframes shake{
  0% { transform: translate(0,0); }
  25% { transform: translate(2px,-1px); }
  50% { transform: translate(-2px,1px); }
  75% { transform: translate(2px,1px); }
  100% { transform: translate(0,0); }
}
</style>
</head>

<body>

<div class="machine" id="machine">
  <!-- LED bulb strip layer -->
  <div class="led-strip"></div>

  <div class="reels">
    <div class="payline"></div>

    <div class="reel" id="r1"><span>üçí</span></div>
    <div class="reel" id="r2"><span>üçã</span></div>
    <div class="reel" id="r3"><span>‚≠ê</span></div>
  </div>

  <button id="spin">SPIN</button>
  <div id="result"></div>
</div>

<script>
/* ---------------- LED RING ANIMATION ----------------
   Consistent glow all around with shifting colors
------------------------------------------------------ */
const root = document.documentElement;

// Hue drivers
let h1 = 35, h2 = 135, h3 = 220, h4 = 305;

// Points around ring
const points = [
  { x: 15,  y: 10,  sx: 0.9,  sy: 0.7 },
  { x: 85,  y: 15,  sx: -0.7, sy: 0.8 },
  { x: 90,  y: 85,  sx: -0.8, sy: -0.7 },
  { x: 10,  y: 90,  sx: 0.8,  sy: -0.6 },
  { x: 50,  y: 0,   sx: 0.4,  sy: 0.9 },
  { x: 100, y: 50,  sx: -0.9, sy: 0.3 },
  { x: 50,  y: 100, sx: -0.3, sy: -0.9 },
  { x: 0,   y: 50,  sx: 0.9,  sy: -0.3 },
];

// Flicker noise
let n = 0;

// shimmer mode boost
let shimmerBoost = 1;

function tickLED(t){
  const e = t / 1000;
  n += 0.02;

  // spark flicker: gives LED dots "alive" feel
  const spark = 0.55 + Math.sin(n * 1.7) * 0.08 + Math.sin(n * 3.3) * 0.05;
  root.style.setProperty("--spark", spark.toFixed(3));

  // hue drift = slow rainbow movement
  h1 = (h1 + 0.18 * shimmerBoost) % 360;
  h2 = (h2 + 0.13 * shimmerBoost) % 360;
  h3 = (h3 + 0.11 * shimmerBoost) % 360;
  h4 = (h4 + 0.16 * shimmerBoost) % 360;

  // micro jitter so it's not "too perfect"
  const flick = Math.sin(n) * 1.2;

  root.style.setProperty("--h1", (h1 + flick).toFixed(2));
  root.style.setProperty("--h2", (h2 - flick).toFixed(2));
  root.style.setProperty("--h3", (h3 + flick).toFixed(2));
  root.style.setProperty("--h4", (h4 - flick).toFixed(2));

  // drift points subtly around border
  points.forEach((p, idx) => {
    const amp = 0.14 * shimmerBoost;

    p.x += Math.sin(e * p.sx) * amp;
    p.y += Math.cos(e * p.sy) * amp;

    p.x = Math.max(0, Math.min(100, p.x));
    p.y = Math.max(0, Math.min(100, p.y));

    root.style.setProperty(`--p${idx+1}x`, `${p.x.toFixed(2)}%`);
    root.style.setProperty(`--p${idx+1}y`, `${p.y.toFixed(2)}%`);
  });

  requestAnimationFrame(tickLED);
}
requestAnimationFrame(tickLED);

/* ---------------- SLOT LOGIC ---------------- */
const symbols = ["üçí","üçã","üçÄ","üíé","‚≠ê","üîî"];

const reels = [
  document.getElementById("r1"),
  document.getElementById("r2"),
  document.getElementById("r3")
];

const btn = document.getElementById("spin");
const result = document.getElementById("result");
const machine = document.getElementById("machine");

btn.addEventListener("click", () => {
  btn.disabled = true;
  result.textContent = "";
  result.className = "";

  // boost LED shimmer while spinning
  shimmerBoost = 2.4;

  reels.forEach(r => r.classList.add("spinning"));

  const results = [];

  reels.forEach((reel, i) => {
    let ticks = 0;

    const spin = setInterval(() => {
      const sym = symbols[Math.floor(Math.random() * symbols.length)];
      reel.querySelector("span").textContent = sym;

      ticks++;
      if (ticks > 12 + i * 6) {
        clearInterval(spin);
        results[i] = sym;
        reel.classList.remove("spinning");

        if (results.length === 3) finish(results);
      }
    }, 80);
  });
});

function finish([a,b,c]){
  btn.disabled = false;

  // return shimmer to normal
  shimmerBoost = 1;

  if (a === b && b === c) {
    result.textContent = "JACKPOT";
    result.classList.add("win");
    machine.classList.add("shake");
    setTimeout(() => machine.classList.remove("shake"), 600);

    // jackpot = quick shimmer burst
    shimmerBoost = 3.3;
    setTimeout(() => shimmerBoost = 1, 650);
  } else if (a === b || b === c || a === c) {
    result.textContent = "Small win";
  } else {
    result.textContent = "No luck";
  }
}
</script>

</body>
</html>
